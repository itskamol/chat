# Chat Application Environment Variables Example
# Copy this file to .env and configure the values according to your environment
# Each service also has its own .env files for specific configurations

# =============================================================================
# COMMON ENVIRONMENT VARIABLES
# =============================================================================

# Environment Type
NODE_ENV=development  # development | production

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# MongoDB Configuration
MONGO_URI=mongodb://root:password@mongodb:27017
MONGO_INITDB_ROOT_USERNAME=root
MONGO_INITDB_ROOT_PASSWORD=password

# =============================================================================
# MESSAGE BROKER CONFIGURATION
# =============================================================================

# RabbitMQ Configuration
MESSAGE_BROKER_URL=amqp://guest:guest@rabbitmq:5672
RABBITMQ_DEFAULT_USER=guest
RABBITMQ_DEFAULT_PASS=guest

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT Configuration (CRITICAL: Use a strong secret in production!)
JWT_SECRET=your_jwt_secret_key_here_minimum_32_characters_long

# =============================================================================
# SERVICE PORTS
# =============================================================================

GATEWAY_PORT=8080
USER_SERVICE_PORT=8081
CHAT_SERVICE_PORT=8082
NOTIFICATION_SERVICE_PORT=8083
FILE_SERVICE_PORT=8084
MEDIA_SERVER_PORT=8085

# =============================================================================
# SERVICE URLS (Internal Communication)
# =============================================================================

GATEWAY_URL=http://gateway:8080
USER_SERVICE_URL=http://user:8081
CHAT_SERVICE_URL=http://chat:8082
NOTIFICATION_SERVICE_URL=http://notification:8083
FILE_SERVICE_URL=http://file-service:3001
MEDIA_SERVER_URL=http://media_server_container:8085

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================

# API Configuration (Client-side accessible URLs)
NEXT_PUBLIC_API_BASE_URL=http://localhost/api
NEXT_PUBLIC_WS_URL=ws://localhost/ws

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================

# SMTP Configuration
SMTP_HOST=smtp-relay.brevo.com
SMTP_PORT=587
SMTP_USER=YOUR_EMAIL@example.com
SMTP_PASS=YOUR_EMAIL_PASSWORD
EMAIL_FROM=chat-app@yourdomain.com

# SendinBlue/Brevo Configuration (if using)
SENDINBLUE_APIKEY=YOUR_BREVO_API_KEY

# =============================================================================
# FILE STORAGE CONFIGURATION
# =============================================================================

# File Upload Configuration
MAX_FILE_SIZE_MB=10
ALLOWED_MIME_TYPES=image/jpeg,image/png,image/gif,image/webp,video/mp4,video/webm,audio/mp3,audio/ogg,application/pdf,text/plain

# AWS S3 Configuration (if using S3 storage)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-east-1
BUCKET_NAME=your-s3-bucket-name
S3_FILE_BASE_URL=https://s3.amazonaws.com/your-s3-bucket-name

# Storage Type Configuration
STORAGE_TYPE=local  # local | s3

# =============================================================================
# MEDIA/WEBRTC CONFIGURATION
# =============================================================================

# MediaSoup Configuration
MEDIASOUP_LISTEN_IP=0.0.0.0
MEDIASOUP_ANNOUNCED_IP=127.0.0.1  # CRITICAL: Set to your public IP in production
MEDIASOUP_RTP_MIN_PORT=20000
MEDIASOUP_RTP_MAX_PORT=20020

# TURN Server Configuration (Client-side accessible)
NEXT_PUBLIC_TURN_SERVER_URL=turn:localhost:3478
NEXT_PUBLIC_TURN_SERVER_USERNAME=turnuser
NEXT_PUBLIC_TURN_SERVER_PASSWORD=turnpassword

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

LOG_LEVEL=debug  # debug | info | warn | error

# MediaSoup Debug
DEBUG=mediasoup:*

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

CORS_ORIGIN=http://localhost:3000
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX=100

# Media Server Performance
MAX_CONCURRENT_ROOMS=50
MAX_PARTICIPANTS_PER_ROOM=20

# =============================================================================
# FEATURE FLAGS
# =============================================================================

NEXT_PUBLIC_ENABLE_VIDEO_CALLS=true
NEXT_PUBLIC_ENABLE_FILE_SHARING=true

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

METRICS_ENABLED=false

# =============================================================================
# ENVIRONMENT-SPECIFIC NOTES
# =============================================================================

# For Development:
# - Use localhost URLs for TURN server and API base URLs
# - Set MEDIASOUP_ANNOUNCED_IP to 127.0.0.1 for local testing
# - Use debug log level

# For Production:
# - Set MEDIASOUP_ANNOUNCED_IP to your server's public IP
# - Use strong JWT secrets (minimum 32 characters)
# - Set LOG_LEVEL to error or warn
# - Use production SMTP settings
# - Enable HTTPS for all public URLs
# - Set proper CORS origins
# For production, it would be your domain, e.g., https://yourdomain.com/api
NEXT_PUBLIC_API_BASE_URL=http://localhost/api

# NEXT_PUBLIC_WS_URL is the WebSocket URL for the Chat service, accessible from the client's browser.
# For local development, if Nginx is on port 80, it's ws://localhost/ws
# For production, it would be your domain, e.g., wss://yourdomain.com/ws
NEXT_PUBLIC_WS_URL=http://localhost
